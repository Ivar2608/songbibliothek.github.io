<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heitzify Songbibliothek</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Heitzify Gradient (Cyan to Fuchsia) -->
    <!-- Application Structure Plan: A dashboard layout was chosen to provide an immediate overview and easy exploration. Key stats at the top offer a quick summary. Interactive controls (search, artist filter) allow users to drill down into the data. The main content is a filterable list for detailed viewing. This structure moves from a broad summary to specific details, guiding the user's discovery process effectively. A dark mode toggle has been added for user comfort. -->
    <!-- Visualization & Content Choices: 1. Summary Stats: Inform -> Stat Cards (HTML/Tailwind) -> Static display -> Provides immediate, high-level context. 2. Full Song List: Organize/Explore -> Filterable List (HTML/JS) -> Real-time search and dropdown filtering -> Allows users to easily find specific songs or view an artist's entire collection. The chart section was removed per user request. NO SVG/Mermaid used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Exo 2', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }
        .dark body {
            background-color: #0f172a;
            color: #f1f5f9;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e2e8f0;
        }
        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 4px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .filter-active {
            background-color: #cffafe !important;
            border-color: #22d3ee !important;
        }
        .dark .filter-active {
            background-color: #083344 !important;
            border-color: #06b6d4 !important;
        }
        .modal {
            transition: opacity 0.25s ease;
        }
    </style>
</head>
<body class="antialiased transition-colors duration-300">

    <div class="container mx-auto p-4 sm:p-6 md:p-8">
        
        <div class="relative text-center mb-12">
            <h1 class="text-5xl font-bold bg-gradient-to-r from-cyan-400 to-fuchsia-500 text-transparent bg-clip-text pb-2 px-16">Heitzify Songbibliothek</h1>
            <p class="text-slate-600 dark:text-slate-400 mt-2">Eine interaktive Übersicht deiner Musiksammlung.</p>
            <button id="theme-toggle" class="absolute top-0 right-0 p-2 rounded-full bg-slate-200 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-100 dark:focus:ring-offset-slate-900 focus:ring-cyan-500" aria-label="Toggle Dark Mode">
                <svg id="theme-icon-light" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                <svg id="theme-icon-dark" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
            </button>
        </div>

        <main>
            <section id="stats" class="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8">
                <div class="bg-slate-50 dark:bg-slate-800 p-6 rounded-lg shadow-md text-center transition-colors duration-300">
                    <h2 class="text-lg font-semibold text-slate-500 dark:text-slate-400">Gesamtzahl Songs</h2>
                    <p id="total-songs" class="text-4xl font-bold text-cyan-600 dark:text-cyan-400 mt-2">0</p>
                </div>
                <div class="bg-slate-50 dark:bg-slate-800 p-6 rounded-lg shadow-md text-center transition-colors duration-300">
                    <h2 class="text-lg font-semibold text-slate-500 dark:text-slate-400">Einzigartige Künstler</h2>
                    <p id="unique-artists" class="text-4xl font-bold text-cyan-600 dark:text-cyan-400 mt-2">0</p>
                </div>
                <div class="bg-slate-50 dark:bg-slate-800 p-6 rounded-lg shadow-md text-center transition-colors duration-300">
                    <h2 class="text-lg font-semibold text-slate-500 dark:text-slate-400">Top Künstler</h2>
                    <p id="top-artist" class="text-2xl sm:text-3xl font-bold text-cyan-600 dark:text-cyan-400 mt-2 truncate">-</p>
                </div>
            </section>

            <section id="song-list-section" class="bg-slate-50 dark:bg-slate-900 p-6 rounded-lg shadow-md transition-colors duration-300">
                <h2 class="text-2xl font-bold text-slate-700 dark:text-slate-200">Vollständige Songliste</h2>
                <p class="text-slate-600 dark:text-slate-400 mb-6">Hier findest du alle deine Songs. Du kannst die Liste durchsuchen, um schnell einen bestimmten Titel oder Interpreten zu finden, oder die Auswahl nach einem bestimmten Künstler filtern, um nur dessen Songs anzuzeigen.</p>
                <div class="flex flex-col md:flex-row gap-4 mb-4 items-center">
                    <input type="text" id="search-input" placeholder="Suche nach Song oder Künstler..." class="flex-grow w-full md:w-auto p-3 border border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-colors duration-300">
                    <select id="artist-filter" class="p-3 w-full md:w-56 border border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-slate-100 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300">
                        <option value="all">Alle Künstler</option>
                    </select>
                    <button id="random-song-btn" class="w-full md:w-auto flex items-center justify-center gap-2 p-3 bg-cyan-500 text-white rounded-md hover:bg-cyan-600 transition-colors duration-300 font-semibold">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M15.33 3.52a.75.75 0 01.428 1.316l-3.033 3.033a1.5 1.5 0 01-2.122 0L7.57 4.836A.75.75 0 018.63 3.77l1.745 1.745a.25.25 0 00.354 0L13.5 2.744a.75.75 0 011.33.428L12.5 5.5h2.75a.75.75 0 010 1.5H12.5l2.33 2.33a.75.75 0 11-1.06 1.06L10.738 7.357a1.5 1.5 0 010-2.122L13.77 2.2a.75.75 0 011.56.54v2.78zm-10 4.15a.75.75 0 11-1.06-1.06L7.303 3.577a1.5 1.5 0 012.122 0l3.033 3.033a.75.75 0 11-1.06 1.06L8.36 4.637a.25.25 0 00-.354 0L5.262 7.382zM4.67 15.17a.75.75 0 01-1.33-.428L5.5 12.36V9.75a.75.75 0 011.5 0V12.5l-2.33 2.33a.75.75 0 01-1.06-1.06l3.033-3.033a1.5 1.5 0 012.122 0l3.033 3.033a.75.75 0 01-1.06 1.06L9.262 12.618a.25.25 0 00-.354 0l-2.745 2.745z" clip-rule="evenodd" />
                        </svg>
                        Zufall
                    </button>
                </div>
                 <div class="flex items-center gap-4 mb-6">
                    <span class="text-sm font-medium text-slate-600 dark:text-slate-400">Sortieren nach:</span>
                    <div class="flex gap-2">
                        <button id="sort-by-title" class="sort-btn px-4 py-2 text-sm rounded-md transition-colors duration-300">Titel</button>
                        <button id="sort-by-artist" class="sort-btn px-4 py-2 text-sm rounded-md transition-colors duration-300">Künstler</button>
                    </div>
                </div>
                <div class="overflow-y-auto max-h-[60vh] pr-2">
                     <ul id="song-list" class="space-y-2">
                     </ul>
                </div>
            </section>
            
            <section id="coming-soon" class="bg-slate-50 dark:bg-slate-900 p-6 rounded-lg shadow-md transition-colors duration-300 mt-8">
                <h2 class="text-2xl font-bold text-slate-700 dark:text-slate-200">Coming Soon</h2>
                <p class="text-slate-600 dark:text-slate-400 mb-6">Geplante Updates und Erweiterungen für die Songbibliothek.</p>
                <ul class="list-disc list-inside space-y-2 text-slate-700 dark:text-slate-300">
                    <li>div. Disneys High School Musical</li>
                    <li>div. Classic Schlager</li>
                    <li>div. Rock und Pop Classics</li>
                </ul>
            </section>

        </main>
        
        <footer class="text-center mt-12 pt-8 border-t border-slate-200 dark:border-slate-800">
            <p class="text-slate-500 dark:text-slate-400">Heitzify Songbibliothek</p>
            <p id="footer-song-count" class="text-sm text-slate-400 dark:text-slate-500 mt-1"></p>
            <p class="text-xs text-slate-400 dark:text-slate-500 mt-6 max-w-2xl mx-auto">
                 Heitzify ist unsere persönliche Erweiterung für das fantastische Open-Source-Projekt <strong>UltraStar Deluxe</strong>. Als passionierte Mitwirkende des Originals wollen wir eine vereinfachte Erfahrung schaffen: Wir bieten eine handverlesene, stetig wachsende Songbibliothek, die sofort und ohne Umwege für den perfekten Karaoke-Abend bereitsteht.
            </p>
        </footer>
    </div>
    
    <button id="back-to-top" class="hidden fixed bottom-5 right-5 bg-cyan-500 hover:bg-cyan-600 text-white p-3 rounded-full shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-100 dark:focus:ring-offset-slate-900 focus:ring-cyan-500">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
      </svg>
    </button>

    <div id="random-song-modal" class="modal hidden fixed inset-0 bg-slate-900 bg-opacity-70 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <div class="bg-slate-50 dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md relative transform scale-95 transition-all duration-300">
            <div class="p-6 text-center">
                <h3 class="text-xl font-bold text-slate-800 dark:text-slate-100 mb-2">Dein zufälliger Song!</h3>
                <div id="random-song-content" class="my-6">
                    <p class="text-3xl font-bold bg-gradient-to-r from-cyan-400 to-fuchsia-500 text-transparent bg-clip-text" id="random-song-title">-</p>
                    <p class="text-lg text-slate-500 dark:text-slate-400 mt-1" id="random-song-artist">-</p>
                </div>
                <button id="close-modal-btn" class="mt-4 px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors duration-300">Schließen</button>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggleBtn = document.getElementById('theme-toggle');
            const lightIcon = document.getElementById('theme-icon-light');
            const darkIcon = document.getElementById('theme-icon-dark');
            const backToTopBtn = document.getElementById('back-to-top');
            const randomSongBtn = document.getElementById('random-song-btn');
            const randomSongModal = document.getElementById('random-song-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const randomSongTitleEl = document.getElementById('random-song-title');
            const randomSongArtistEl = document.getElementById('random-song-artist');

            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    lightIcon.classList.add('hidden');
                    darkIcon.classList.remove('hidden');
                } else {
                    document.documentElement.classList.remove('dark');
                    lightIcon.classList.remove('hidden');
                    darkIcon.classList.add('hidden');
                }
            };

            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            applyTheme(savedTheme || (prefersDark ? 'dark' : 'light'));

            themeToggleBtn.addEventListener('click', () => {
                const isDark = document.documentElement.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                lightIcon.classList.toggle('hidden', isDark);
                darkIcon.classList.toggle('hidden', !isDark);
            });
            
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTopBtn.classList.remove('hidden');
                } else {
                    backToTopBtn.classList.add('hidden');
                }
            });

            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            const songData = [
                { artist: "ABBA", title: "Mamma Mia" },
                { artist: "AnnenMayKantereit", title: "Ausgehen" },
                { artist: "AnnenMayKantereit", title: "Barfuß am Klavier" },
                { artist: "AnnenMayKantereit", title: "Oft gefragt" },
                { artist: "AnnenMayKantereit", title: "Pocahontas" },
                { artist: "Banaroo", title: "Dubi Dam Dam" },
                { artist: "Billy Joel", title: "Uptown Girl" },
                { artist: "Coldplay", title: "Speed Of Sound (Album Version)" },
                { artist: "Disney", title: "Ein Traum wird wahr (Aladdin) [DUET]" },
                { artist: "Disney", title: "Prinz Ali (Aladdin)" },
                { artist: "Disney", title: "Nur ein Kuss (Arielle)" },
                { artist: "Disney", title: "Unter dem Meer (Arielle)" },
                { artist: "Disney", title: "Katzen brauchen furchtbar viel Musik (Aristocats) [DUET]" },
                { artist: "Disney", title: "Intro (Chip & Chap)" },
                { artist: "Disney", title: "Ich wäre gern wie Du (Das Dschungelbuch)" },
                { artist: "Disney", title: "Ich wäre gern wie Du (Das Dschungelbuch) [DUET]" },
                { artist: "Disney", title: "Probier's mal mit Gemütlichkeit (Das Dschungelbuch)" },
                { artist: "Disney", title: "Lass jetzt los (Die Eiskönigin)" },
                { artist: "Disney", title: "Theme (DuckTales)" },
                { artist: "Disney", "title": "Druck (Encanto)" },
                { artist: "Disney", title: "Theme (Gummibärenbande)" },
                { artist: "Disney", title: "Ich werd's noch beweisen! (Hercules)" },
                { artist: "Disney", title: "Ich will keinen Mann (Hercules)" },
                { artist: "Disney", title: "Intro (Käpt'n Balu und seine tollkühne Crew)" },
                { artist: "Disney", title: "Der ewige Kreis (Der König der Löwen) [DUET]" },
                { artist: "Disney", title: "Hakuna Matata (Der König der Löwen)" },
                { artist: "Disney", title: "Hakuna Matata (Der König der Löwen) [DUET]" },
                { artist: "Disney", title: "Ich will jetzt gleich König sein (Der König der Löwen)" },
                { artist: "Disney", title: "Kann es wirklich Liebe sein (Der König der Löwen)" },
                { artist: "Disney", title: "Sei ein Mann (Mulan)" },
                { artist: "Disney", title: "Das Farbenspiel des Winds (Pocahontas)" },
                { artist: "Disney", title: "Zwei Welten (Tarzan Musical)" },
                { artist: "Disney", title: "So ein Mann (Tarzan / Phil Collins)" },
                { artist: "Disney", title: "Dir gehört mein Herz (Tarzan / Phil Collins & Eva Mattes)" },
                { artist: "Disney", title: "Du hast 'n Freund in mir (Toy Story)" },
                { artist: "Disney", title: "Voll gerne (Vaiana / Andreas Bourani)" },
                { artist: "Disney", title: "Ich bin bereit (Vaiana / Debbie van Dooren)" },
                { artist: "Disney", title: "Ich bin bereit (Vaiana / Helene Fischer)" },
                { artist: "DJ BoBo", title: "Chihuahua" },
                { artist: "DJ Ötzi & Nik P.", title: "Ein Stern (... der deinen Namen trägt)" },
                { artist: "Echt", title: "Du trägst keine Liebe in dir" },
                { artist: "Erste Allgemeine Verunsicherung", title: "Ding Dong" },
                { artist: "Extreme", title: "More Than Words [DUET]" },
                { artist: "Geier Sturzflug", title: "Bruttosozialprodukt" },
                { artist: "Helene Fischer", title: "Atemlos durch die Nacht" },
                { artist: "Helene Fischer", title: "Herzbeben" },
                { artist: "Hermes House Band", title: "Country Roads" },
                { artist: "Hoobastank", title: "The Reason" },
                { artist: "Höhner", title: "Viva Colonia (Da simmer dabei, dat is prima!)" },
                { artist: "John Denver", title: "Take Me Home, Country Roads" },
                { artist: "Khaled", title: "Aïcha" },
                { artist: "Lady Gaga", title: "Paparazzi" },
                { artist: "Leonard Cohen", title: "Hallelujah" },
                { artist: "Mark Forster", title: "Übermorgen" },
                { artist: "Matthias Reim", title: "Verdammt - ich lieb' dich" },
                { artist: "Mickie Krause", title: "Laudato si" },
                { artist: "Olaf Henning", title: "Cowboy und Indianer (Komm hol' das Lasso raus)" },
                { artist: "Oliver Pocher", title: "Schwarz und weiß" },
                { artist: "Paramore", title: "Still Into You" },
                { artist: "Peter Maffay", title: "Und es war Sommer" },
                { artist: "Philipp Dittberner & Marv", title: "Wolke 4" },
                { artist: "Philipp Poisel", title: "Ich will nur (Live)" },
                { artist: "Philipp Poisel", title: "Wie soll ein Mensch das ertragen" },
                { artist: "Pur", title: "Hitmix" },
                { artist: "Rednex", title: "Cotton Eye Joe" },
                { artist: "Right Said Fred", title: "You're My Mate" },
                { artist: "Santiano", title: "Alle die mit uns auf Kaperfahrt fahren" },
                { artist: "Scorpions", title: "Wind Of Change" },
                { artist: "Tabaluga & Lilli", title: "Nessaja (Peter Maffay)" },
                { artist: "Taylor Swift", title: "Anti-Hero" },
                { artist: "Taylor Swift", title: "Bad Blood" },
                { artist: "Taylor Swift", title: "Blank Space" },
                { artist: "Taylor Swift", title: "Cruel Summer" },
                { artist: "Taylor Swift", title: "I Knew You Were Trouble" },
                { artist: "Taylor Swift", title: "Karma" },
                { artist: "Taylor Swift", title: "Miss Americana & The Heartbreak Prince" },
                { artist: "Taylor Swift feat. Ice Spice", title: "Karma" },
                { artist: "Wir sind Helden", title: "Denkmal" },
                { artist: "Wolfgang Petry", title: "Wahsinns (Live)" },
            ];

            const songListEl = document.getElementById('song-list');
            const searchInputEl = document.getElementById('search-input');
            const artistFilterEl = document.getElementById('artist-filter');
            const sortByTitleBtn = document.getElementById('sort-by-title');
            const sortByArtistBtn = document.getElementById('sort-by-artist');
            let currentSort = 'title';

            function updateSortButtons() {
                if (currentSort === 'title') {
                    sortByTitleBtn.classList.add('bg-cyan-500', 'text-white');
                    sortByTitleBtn.classList.remove('bg-slate-200', 'dark:bg-slate-700', 'text-slate-700', 'dark:text-slate-200');
                    sortByArtistBtn.classList.add('bg-slate-200', 'dark:bg-slate-700', 'text-slate-700', 'dark:text-slate-200');
                    sortByArtistBtn.classList.remove('bg-cyan-500', 'text-white');
                } else {
                    sortByArtistBtn.classList.add('bg-cyan-500', 'text-white');
                    sortByArtistBtn.classList.remove('bg-slate-200', 'dark:bg-slate-700', 'text-slate-700', 'dark:text-slate-200');
                    sortByTitleBtn.classList.add('bg-slate-200', 'dark:bg-slate-700', 'text-slate-700', 'dark:text-slate-200');
                    sortByTitleBtn.classList.remove('bg-cyan-500', 'text-white');
                }
            }

            function renderSongList(songs) {
                songListEl.innerHTML = '';
                if (songs.length === 0) {
                    songListEl.innerHTML = `<li class="text-slate-500 dark:text-slate-400 text-center p-4">Keine Songs gefunden.</li>`;
                    return;
                }

                const sortedSongs = [...songs].sort((a, b) => {
                    if (currentSort === 'artist') {
                        const artistCompare = a.artist.localeCompare(b.artist);
                        if (artistCompare !== 0) return artistCompare;
                    }
                    return a.title.localeCompare(b.title);
                });

                sortedSongs.forEach((song, index) => {
                    const li = document.createElement('li');
                    li.className = 'flex items-center p-3 bg-slate-100 dark:bg-slate-800/[.5] rounded-md hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors duration-200';
                    li.innerHTML = `
                        <span class="text-slate-500 dark:text-slate-400 font-medium w-8 text-right mr-4">${index + 1}.</span>
                        <div class="flex-grow">
                            <p class="font-semibold text-slate-800 dark:text-slate-100">${song.title}</p>
                            <p class="text-sm text-slate-600 dark:text-slate-400">${song.artist}</p>
                        </div>
                    `;
                    songListEl.appendChild(li);
                });
            }
            
            function calculateAndDisplayStats() {
                const totalSongs = songData.length;
                const artists = songData.map(s => s.artist);
                const uniqueArtists = [...new Set(artists)];
                
                const artistCounts = artists.reduce((acc, artist) => {
                    acc[artist] = (acc[artist] || 0) + 1;
                    return acc;
                }, {});

                const topArtistEntry = Object.entries(artistCounts).sort((a, b) => b[1] - a[1])[0];
                
                document.getElementById('total-songs').textContent = totalSongs;
                document.getElementById('unique-artists').textContent = uniqueArtists.length;
                document.getElementById('top-artist').textContent = topArtistEntry ? `${topArtistEntry[0]} (${topArtistEntry[1]})` : '-';
                document.getElementById('footer-song-count').textContent = `${totalSongs} Songs in der Bibliothek`;


                return { uniqueArtists };
            }

            function setupFilters(uniqueArtists) {
                uniqueArtists.sort((a,b) => a.localeCompare(b)).forEach(artist => {
                    const option = document.createElement('option');
                    option.value = artist;
                    option.textContent = artist;
                    artistFilterEl.appendChild(option);
                });
            }
            
            function getFilteredSongs() {
                const searchTerm = searchInputEl.value.toLowerCase();
                const selectedArtist = artistFilterEl.value;
                return songData.filter(song => {
                    const matchesSearch = song.title.toLowerCase().includes(searchTerm) || song.artist.toLowerCase().includes(searchTerm);
                    const matchesArtist = selectedArtist === 'all' || song.artist === selectedArtist;
                    return matchesSearch && matchesArtist;
                });
            }

            function filterAndRender() {
                artistFilterEl.classList.toggle('filter-active', artistFilterEl.value !== 'all');
                const filteredSongs = getFilteredSongs();
                renderSongList(filteredSongs);
            }
            
            sortByTitleBtn.addEventListener('click', () => {
                currentSort = 'title';
                updateSortButtons();
                filterAndRender();
            });

            sortByArtistBtn.addEventListener('click', () => {
                currentSort = 'artist';
                updateSortButtons();
                filterAndRender();
            });

            const { uniqueArtists } = calculateAndDisplayStats();
            setupFilters(uniqueArtists);
            updateSortButtons();
            filterAndRender();

            searchInputEl.addEventListener('input', filterAndRender);
            artistFilterEl.addEventListener('change', filterAndRender);

            function showModal() {
                randomSongModal.classList.remove('hidden');
                setTimeout(() => {
                    randomSongModal.classList.remove('opacity-0', 'pointer-events-none');
                    randomSongModal.querySelector('div').classList.remove('scale-95');
                }, 10);
            }

            function hideModal() {
                randomSongModal.classList.add('opacity-0');
                randomSongModal.querySelector('div').classList.add('scale-95');
                setTimeout(() => {
                    randomSongModal.classList.add('hidden', 'pointer-events-none');
                }, 300);
            }

            randomSongBtn.addEventListener('click', () => {
                const currentSongs = getFilteredSongs();
                if (currentSongs.length > 0) {
                    const randomIndex = Math.floor(Math.random() * currentSongs.length);
                    const randomSong = currentSongs[randomIndex];
                    randomSongTitleEl.textContent = randomSong.title;
                    randomSongArtistEl.textContent = randomSong.artist;
                } else {
                    randomSongTitleEl.textContent = 'Kein Song gefunden';
                    randomSongArtistEl.textContent = 'Bitte ändere deine Filterauswahl.';
                }
                showModal();
            });

            closeModalBtn.addEventListener('click', hideModal);
            randomSongModal.addEventListener('click', (event) => {
                if (event.target === randomSongModal) {
                    hideModal();
                }
            });

        });
    </script>
</body>
</html>

